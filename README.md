
<!-- README.md is generated from README.Rmd. Please edit that file -->

# thaigov

<!-- badges: start -->

[![R-CMD-check](https://github.com/asiripanich/thaigov/workflows/R-CMD-check/badge.svg)](https://github.com/asiripanich/thaigov/actions)
<!-- badges: end -->

The goal of thaigov is to provide an easy access to the datasets on the
[Open Government Data of Thailand](https://data.go.th/) API from R.

The Thai documentation of the API can be viewed here:
<https://opendata.data.go.th/pages/data-go-th-api>.

## Installation

You can install the development version of thaigov from
[GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("asiripanich/thaigov")
```

## Example

First put your Open Government Data of Thailand API key in your
machine’s `.Renviron` file. I normally use `usethis::edit_r_environ()`
to find and open my `.Renviron` file. Insert the your API key in the
following format: `THGOV_OPENDATA_TOKEN=<your-API-key>`.

``` r
library(thaigov)
library(tibble)

covid_resources <- th_resource_search("โควิด") # search for resources that contain the word "COVID" in Thai in their description.
#> Warning in data.table::rbindlist(., fill = TRUE): Column 8 ['mimetype_inner'] of item 1 is length 0. This (and 73 others like it) has been filled with NA (NULL for list columns) to make each item uniform.
covid_resources %>% as_tibble()
#> # A tibble: 13 × 35
#>    resource_disaggregate hash  description resource_access… format resource_data_c… package_id mimetype_inner url_type datastore_conta… datastore_active id       size mimetype cache_url name  metadata_modifi… created url   created_at
#>    <chr>                 <chr> <chr>       <chr>            <chr>  <chr>            <chr>      <lgl>          <chr>    <chr>            <lgl>            <chr>   <int> <chr>    <lgl>     <chr> <chr>            <chr>   <chr> <chr>     
#>  1 []                    ""    "หลักสูตรออน… ""               URL    ""               32156f22-… NA             <NA>     False            FALSE            d687…      NA <NA>     NA        "หลัก… 2021-05-25T08:4… 2021-0… "htt… 2021-05-2…
#>  2 []                    ""    "หลักสูตรออน… ""               URL    ""               32156f22-… NA             <NA>     False            FALSE            c72e…      NA <NA>     NA        "หลัก… 2021-05-25T08:4… 2021-0… ""    2021-05-2…
#>  3 []                    ""    "ข่าวสารโควิ… ""               CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             bd4b…  602304 text/csv NA        "ข่าว… 2021-09-23T09:1… 2021-0… "htt… 2021-07-1…
#>  4 []                    ""    "ข้อมูลการตร… ""               CSV    ""               9f6d900f-… NA             upload   <NA>             TRUE             0092…  115229 text/csv NA        " ข้อ… <NA>             2021-0… "htt… <NA>      
#>  5 []                    ""    "\t\r\nข่าว…  <NA>            API     <NA>            5eaac3dc-… NA             <NA>     <NA>             FALSE            d411…      NA <NA>     NA        "ฮอก" <NA>             2021-0… "htt… <NA>      
#>  6 []                    "835… "ข่าวสารโควิ… ""               CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             4789…  455293 text/csv NA        "ข่าว… 2021-09-23T09:1… 2021-0… "htt… 2021-07-1…
#>  7 []                    "ac8… "ข่าวสารโควิ… ""               CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             3118…  502679 text/csv NA        "ข่าว… 2021-09-23T09:1… 2021-0… "htt… 2021-09-0…
#>  8 []                    "440… "ข่าวสารโควิ… ""               CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             f2d4…   72329 text/csv NA        "ข่าว… 2021-10-14T07:1… 2021-0… "htt… 2021-09-2…
#>  9 []                    ""    "ข่าวสารโควิ… "สาธารณะ"        CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             4165…  368157 text/csv NA        "ข่าว… 2021-11-15T06:2… 2021-1… "htt… 2021-10-1…
#> 10 []                    "d5c… "ข่าวสารโควิ… "สาธารณะ"        CSV    ""               94a3d8c5-… NA             <NA>     False            TRUE             5b9b…  327054 text/csv NA        "ข่าว… 2021-12-29T01:5… 2021-1… "htt… 2021-11-1…
#> 11 []                    "267… "ข่าวสารโควิ… "สาธารณะ"        CSV    ""               94a3d8c5-… NA             <NA>     True             TRUE             ff2e…  241382 text/csv NA        "ข่าว… 2021-12-29T01:5… 2021-1… "htt… 2021-12-2…
#> 12 []                    "ed1… "ข่าวสารโควิ… "สาธารณะ"        CSV    ""               94a3d8c5-… NA             <NA>     True             TRUE             c562…  194057 text/csv NA        "ข่าว… 2022-01-18T03:1… 2022-0… "htt… 2022-01-1…
#> 13 []                    "1b8… "ข่าวสารโควิ… "สาธารณะ"        CSV    ""               94a3d8c5-… NA             <NA>     True             TRUE             f51e… 2025278 text/csv NA        "ข่าว… 2022-02-15T13:2… 2022-0… "htt… 2022-02-1…
#> # … with 15 more variables: cache_last_updated <lgl>, state <chr>, last_modified <chr>, position <int>, revision_id <chr>, resource_type <lgl>, resource_data_collect <chr>, resource_created_date <lgl>,
#> #   resource_last_updated_date <chr>, original_url <chr>, resource_id <chr>, set_url_type <chr>, ignore_hash <chr>, ckan_url <chr>, task_created <chr>
covid_csv_datasets <- covid_resources %>%
  .[format == "CSV" & !is.na(resource_id), resource_id] %>%
  lapply(function(x) th_get(x) %>% as_tibble())
covid_csv_datasets
#> [[1]]
#> # A tibble: 100 × 7
#>    `_id` NewsTitle                                                                                                      NewsDate            Region             Province     Department                    Link_News                      
#>    <int> <chr>                                                                                                          <chr>               <chr>              <chr>        <chr>                         <chr>                          
#>  1     1 "เชิงรุก ยะลาตั้งจุดบริการฉีดวัคซีนแก่ประชาชนที่เดินทางเข้าเมืองยะลา"                                                         2021-01-11T00:00:00 ภาคใต้              ยะลา         สวท.ยะลา                      https://thainews.prd.go.th/th/…
#>  2     2 "รับเปิดประเทศ วันแรก ยะลา คงเคอร์ฟิว 5 ทุ่ม ถึง ตี 3  \u0093เข้ม\u0094 ผู้เดินทางเข้าจังหวัดทุกคนต้องฉีดวัคซีน"                    2021-01-11T00:00:00 ภาคใต้              ยะลา         สทท.ยะลา                      https://thainews.prd.go.th/th/…
#>  3     3 "ไทย ฉีดวัคซีนแล้วกว่า 75 ล้านโดส ทั่วโลกแล้ว 7,000 ล้านโดส ใน 205 ประเทศเขตปกครอง"                                      2021-01-11T00:00:00 ภาคกลางและปริมณฑล   กรุงเทพมหานคร สถานีวิทยุกระจายเสียงแห่งประเทศไทย https://thainews.prd.go.th/th/…
#>  4     4 "สถานการณ์แพร่ระบาดไวรัสโควิด-19 จ.ระยอง ประจำวันที่ 1 พฤศจิกายน  2564 พบผู้ติดเชื้อรายใหม่ 240 ราย  เสียชีวิต 5 ราย"           2021-01-11T00:00:00 ภาคตะวันออก         ระยอง        สวท.ระยอง                     https://thainews.prd.go.th/th/…
#>  5     5 "ประชาชน  ลงทะเบียน Booster Dose   เข็ม 3  คึกคัก ด้าน รพ. ยะลา  เร่ง เก็บตกนักเรียน ฉีดเข็ม 2ไฟเซอร์"                     2021-01-11T00:00:00 ภาคใต้              ยะลา         สทท.ยะลา                      https://thainews.prd.go.th/th/…
#>  6     6 "หนองคาย บรรยากาศเปิดเรียนวันแรก"                                                                                 2021-01-11T00:00:00 ภาคตะวันออกเฉียงเหนือ หนองคาย      สำนักงานประชาสัมพันธ์จังหวัดหนองคาย https://thainews.prd.go.th/th/…
#>  7     7 "ยะลา คุมเข้มป้องกันโควิด ส่งทหารกองเกิน เข้าประจำการ"                                                                 2021-01-11T00:00:00 ภาคใต้              ยะลา         สทท.ยะลา                      https://thainews.prd.go.th/th/…
#>  8     8 "ภาคเอกชนจังหวัดสุรินทร์ มอบน้ำดื่มไว้บริการประชาชนที่เดินทางมาฉีดวัคซีนป้องกันโควิด-19"                                          2021-01-11T00:00:00 ภาคตะวันออกเฉียงเหนือ สุรินทร์        สำนักงานประชาสัมพันธ์จังหวัดสุรินทร์   https://thainews.prd.go.th/th/…
#>  9     9 "บรรยากาศเปิดเทอมวันแรก โรงเรียนเมืองสกลนคร นักเรียนยังคงต้องสลับวันกันมาเรียนออนไซต์ ภายใต้มาตรการควบคุมโควิด-19 อย่างเคร่งครัด" 2021-01-11T00:00:00 ภาคตะวันออกเฉียงเหนือ สกลนคร       สวท.สกลนคร                    https://thainews.prd.go.th/th/…
#> 10    10 "ผู้ว่าฯ ตรัง เรียกประชุมหน่วยงานที่เกี่ยวข้องร่วมประชุมเพื่อปรับแนวทางในการป้องกันการแพร่ระบาดโควิด 19 และการดูแลผู้ติดเชื้อโควิด 19"     2021-01-11T00:00:00 ภาคใต้              ตรัง          สำนักงานประชาสัมพันธ์จังหวัดตรัง     https://thainews.prd.go.th/th/…
#> # … with 90 more rows
#> 
#> [[2]]
#> # A tibble: 100 × 7
#>    `_id` NewsTitle                                                                                                                                              NewsDate            Region             Province      Department Link_News
#>    <int> <chr>                                                                                                                                                  <chr>               <chr>              <chr>         <chr>      <chr>    
#>  1     1 "ยะลา เปิดจองวัคซีนโมเดอร์นา สำหรับประชาชน 3 กลุ่ม"                                                                                                           2021-01-12T00:00:00 "ภาคใต้"            "ยะลา"        "สทท.ยะลา" "https:/…
#>  2     2 "จ.สุราษฎร์ธานีร่วมรณรงค์ฉีดวัคซีนโควิด-19 เพื่อกลุ่มเป้าหมายเข้าถึงวัคซีน 100 ล้านโดส"                                                                                   2021-01-12T00:00:00 "ภาคใต้"            "สุราษฎร์ธานี"   "สำนักงานป… "https:/…
#>  3     3 "สธ.ชัยนาท ขยายเวลา Walk in ฉีดวัคซีนโควิด-19 เข็มแรก ถึง 31 ธ.ค 64 และเปิดให้ลงทะเบียนกระตุ้นไฟเซอร์ เข็ม 3 ตั้งแต่บัดนี้ถึง 10 ธ.ค.64 ได้ที่ รพ.สต.ใกล้บ้าน วันที่ 1 ธันวาคม 2564" 2021-01-12T00:00:00 "ภาคกลางและปริมณฑล" "ชัยนาท"       "สวท.ชัยนา… "https:/…
#>  4     4 "รพ.ยะลา เปิดจองคิวฉีดวัคซีน \"โมเดอร์น่า\" สำหรับ 3 กลุ่ม เช็กเงื่อนไขที่นี่"                                                                                          2021-01-12T00:00:00 "ภาคใต้"            "ยะลา"        "สวท.ยะลา" "https:/…
#>  5     5 "ผู้ว่าฯ ประจวบคีรีขันธ์ เปิดจุดบริการฉีดวัคซีนโควิดเชิงรุกที่โรงยิม สนามกีฬากลางจังหวัดฯ ในสัปดาห์แห่งการฉีดวัคซีนสู่เป้าหมาย 100 ล้านโดส"                                            2021-01-12T00:00:00 "ภาคตะวันตก"        "ประจวบคีรีขันธ์" "สวท.ประจ… "https:/…
#>  6     6 "โควิด-19 ระยอง พบผู้เสียชีวิต?เพิ่ม? 1? ราย ส่วนผู้ติดเชื้อรายวันพบ?เพิ่มขึ้น? 43 ราย เสียชีวิตสะสม 302 ราย ผู้ติดเชื้อสะสมระลอกใหม่ 45,087 ราย"                                  2021-01-12T00:00:00 "ภาคตะวันออก"       "ระยอง"       "สำนักงานป… "https:/…
#>  7    36 "ชาวยะลา เริ่มฉีด \u0093โมเดอร์นา\u0094 กระตุ้นภูมิต้านโควิดพันธุ์ใหม่ ศูนย์ฉีดฯ คึกคัก"                                                                                  2021-02-12T00:00:00 "ภาคใต้"            "ยะลา"        "สทท.ยะลา" "https:/…
#>  8  1001 ""                                                                                                                                                     <NA>                ""                 ""            ""         ""       
#>  9  1002 ""                                                                                                                                                     <NA>                ""                 ""            ""         ""       
#> 10     7 "ยะลา ติดโควิดรายใหม่ 87 ราย  ขณะ ราชกิจจาฯ ประกาศ ขยาย พ.ร.ก.ฉุกเฉินอีก 2 เดือน  ป้องกันโควิดสายพันธุ์ใหม่"                                                          2021-01-12T00:00:00 "ภาคใต้"            "ยะลา"        "สทท.ยะลา" "https:/…
#> # … with 90 more rows
#> 
#> [[3]]
#> # A tibble: 100 × 8
#>    `_id` v                                                                                                                             Detail                                               NewsDate Region Province Department Link_News
#>    <int> <chr>                                                                                                                         <chr>                                                <chr>    <chr>  <chr>    <chr>      <chr>    
#>  1     1 สถานการณ์แพร่ระบาดไวรัสโควิด-19 จ.ระยอง ประจำวันที่ 1 มกราคม  2565 พบผู้ติดเชื้อรายใหม่เพิ่ม 59 ราย                                          "<p><strong>สถานการณ์แพร่ระบาดไวรัสโควิด-19&nbsp;จ.ระยอ… 2022-01… ภาคตะ… ระยอง    สวท.ระยอง  https://…
#>  2     2 ไทย ฉีดวัคซีนแล้วกว่า 104 ล้านโดส ทั่วโลกแล้ว 9,121 ล้านโดส ใน 205 ประเทศเขตปกครอง                                                      "<p><span style=\"background-color: rgb(255, 255, 2… 2022-01… ภาคกล… กรุงเทพม… สถานีวิทยุกร… https://…
#>  3     3 สถานการณ์โควิดยะลา คลี่คลายต่อเนื่อง วันแรกปีใหม่ เหลือรายใหม่ติดเชื้อ 14 ราย                                                                "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคใต้  ยะลา     สทท.ยะลา   https://…
#>  4     4 จังหวัดแม่ฮ่องสอน ออกมาตรการให้ทุกหน่วยงานในจังหวัดแม่ฮ่องสอน ทุกอำเภอ พิจารณาดำเนินการตามแนวปฏิบัติ Work from Home ระหว่างวันที่ 1-14 มกราคม 2565 "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคเห… แม่ฮ่องสอน สวท.แม่ฮ่อง… https://…
#>  5     5 คณะกรรมการโรคติดต่อจังหวัดสุพรรณบุรี แจ้งจำนวนเตียงรองรับผู้ป่วย COVID-19 และสถานการณ์การติดเชื้อ COVID-19                                     "<p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb… 2022-01… ภาคกล… สุพรรณบุรี  สวท.สุพรรณ… https://…
#>  6    17 สถานการณ์โควิด-19 วันนี้ มีผู้ติดเชื้อรายใหม่ 3,112 ราย หายป่วยกลับบ้านได้ 2,921 ราย เสียชีวิต 12 ราย                                            "<p><strong>ศูนย์ข้อมูล&nbsp;COVID-19&nbsp;รายงานตัวเลขส… 2022-02… ภาคกล… กรุงเทพม… Radio-สถา… https://…
#>  7     6 จังหวัดแม่ฮ่องสอน พบผู้ติดเชื้อโควิด-19 ต่อเนื่อง วันแรกของปี 65 เพิ่ม 11 ราย อยู่ระหว่างรักษาตัว 202 ราย                                           "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคเห… แม่ฮ่องสอน สวท.แม่สะเ… https://…
#>  8     7 จ.ลำพูน พบติดเชื้อ COVID19 จากผล RT-PCR 9 ราย แบ่งเป็นในจังหวัด 8 ราย ต่างจังหวัด 1 ราย ผลตรวจ ATK Plus 7 ราย                            "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคเห… ลำพูน     สวท.ลำพูน   https://…
#>  9     8 จังหวัดอุบลราชธานี เกิดอุบัติเหตุทางถนน ช่วงเทศกาลปีใหม่ 2565 สะสม 3 วัน เกิดอุบัติเหตุ 14 ครั้ง เสียชีวิต 2 ราย สาเหตุขับรถเร็วเกินกว่ากำหนด             "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคตะ… อุบลราชธ… สวท.อุบลรา… https://…
#> 10     9 ลำปาง พบผู้ป่วยโควิด-19 รายใหม่ 32 คน                                                                                              "<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp… 2022-01… ภาคเห… ลำปาง    สวท.ลำปาง  https://…
#> # … with 90 more rows

th_package_list() %>% sample(size = 10)
#>  [1] "os_13_00002"                               "view_address_type"                         "dataset-rg_11_07"                          "e-gp"                                      "item_7e27862b-ba03-406e-a3b6-3a0d41465d16"
#>  [6] "it-16-12"                                  "tak2_race_sch_2563"                        "e-ict67-1"                                 "vertiver"                                  "item_06a9b7a1-c4c9-4c98-9c16-1757e4e2c4a6"
# th_package_search("โควิด") # search for packages that contain the word "COVID" in Thai.
# ​th_package_show("3e9d9124-d187-4fc7-b2fb-22c681ceb4fe")
```
